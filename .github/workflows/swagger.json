{
	"openapi": "3.0.1",
	"info": {
		"title": "PFM",
		"version": "v1.0.0"
	},
	"servers": [{
		"url": "https://ciyu9u9i9l.execute-api.us-east-1.amazonaws.com/test//pfm-service/"
	}],
	"paths": {
		"/monitoring/health-check/": {
			"get": {
				"summary": "Health check",
				"operationId": "health_check",
				"description": "",
				"parameters": [],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite verificiar si el servicio está activo"
					}
				},
				"tags": [
					"Monitoreo"
				]
			}
		},
		"/monitoring/sentry/": {
			"get": {
				"summary": "Sentry",
				"operationId": "sentry",
				"description": "",
				"parameters": [],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite determinar si el servicio está conectado con Sentry."
					}
				},
				"tags": [
					"Monitoreo"
				]
			}
		},
		"/user/{userID}/budgets/": {
			"get": {
				"summary": "Presupuestos del usuario filtrados por mes",
				"operationId": "get_budgets_by_month",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-05"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener los Presupuestos del usuario filtrados por mes."
					}
				},
				"tags": [
					"Presupuestos"
				]
			},
            "post": {
                "summary": "Crear presupuesto",
                "operationId": "crear_presupuesto",
                "parameters": [
                    {
                        "in": "path",
                        "name": "userID",
                        "schema": {
                            "type": "string"
                        },
                        "required": true,
                        "description": "Id del usuario",
                        "example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
                    }
                ],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Presupuesto"
							},
                            "examples": {
                                "Crear presupuesto": {
                                  "summary": "Ejemplo para crear un presupuesto de la categoría shopping para el mes actual.",
                                  "value": {
                                        "amount": 4000,
										"user": "b9e605ee-4cca-400e-99c5-ae24abca97d5",
										"category": "22118f55-e6a9-46b0-ae8f-a063dda396e0"
                                  }
                                }
                            }
						}
					}
				},	
                "responses": {
                    "201": {
                        "description": "Created"
                    }
                },
                "tags": [
                    "Presupuestos"
                ]
            } 
		},			
		"/user/{userID}/budgets/categories/{categoryID}/": {
			"get": {
				"summary": "Presupuestos del usuario filtrados por categoría y por mes",
				"operationId": "get_budgets_by_category_month",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "categoryID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id de la categoría",
						"example": "22118f55-e6a9-46b0-ae8f-a063dda396e0"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Mes a consultar",
						"example": "2022-05"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener los Presupuestos del usuario filtrados por categoría y por mes."
					}
				},
				"tags": [
					"Presupuestos"
				]
			}
		},
		"/user/{userID}/budgets/{budgetID}/": {
			"get": {
				"summary": "Ver detalle del presupuesto",
				"operationId": "get_budget_detail",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "budgetID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del presupuesto",
						"example": "ea6b42a9-cde1-4e03-94ba-6818c21e5328"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Obtener detalle del presupuesto"
					}
				},
				"tags": [
					"Presupuestos"
				]
			},
			"patch": {
				"summary": "Actualizar presupuesto parcialmente.",
				"operationId": "update_budget",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "479ec168013945d0b7042bc4e5d0c4fb"
					},
					{
						"in": "path",
						"name": "budgetID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del presupuesto",
						"example": "45a80dbbea714ce390b3-6761bcbf365c"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Presupuesto"
							},
                            "examples": {
                                "Actualizar monto": {
                                  "summary": "Ejemplo actualizar monto",
                                  "value": {
                                        "amount": 9000
                                  }
                                }                      
                            }							
						}
					}
				},			
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Actualizar presupuesto"
					}
				},
				"tags": [
					"Presupuestos"
				]
			},
			"put": {
				"summary": "Actualizar presupuesto.",
				"operationId": "update_budget_put",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "budgetID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del presupuesto",
						"example": "ea6b42a9-cde1-4e03-94ba-6818c21e5328"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Presupuesto"
							},
                            "examples": {
                                "Actualizar monto": {
                                  "summary": "Ejemplo actualizar monto",
                                  "value": {
									  "amount": 2000
                                  }
                                }                      
                            }								
						}
					}
				},				
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Update budget"
					}
				},
				"tags": [
					"Presupuestos"
				]
			}			
		},
		"/user/{userID}/transactions/": {
			"get": {
				"summary": "Transacciones del usuario filtrados por mes",
				"operationId": "get_transactions_by_month",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-05"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener las transacciones del usuario filtrados por mes."
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/user/{userID}/transactions/categories/{categoryID}/": {
			"get": {
				"summary": "Transacciones del usuario filtrados por categoría y por mes",
				"operationId": "get_transactions_by_category_month",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "categoryID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id de la categoría",
						"example": "22118f55-e6a9-46b0-ae8f-a063dda396e0"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-095"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener los Presupuestos del usuario filtrados por categoría y por mes."
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},		
		"/user/{userID}/transactions/{transactionID}/": {
			"get": {
				"summary": "Ver detalle de la transacción",
				"operationId": "get_transaction_detail",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "transactionID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id de la transacción",
						"example": "f1b95404-f638-4a26-b19b-6f3c8a29e115"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Obtener detalle de la transacción"
					}
				},
				"tags": [
					"Transacciones"
				]
			},
			"patch": {
				"summary": "Actualizar transacción parcialmente.",
				"operationId": "update_transaction",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "transactionID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id de la transacción",
						"example": "f1b95404-f638-4a26-b19b-6f3c8a29e115"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/Transaccion"
							},
                            "examples": {
                                "Actualizar nota": {
                                  "summary": "Ejemplo para actualizar nota",
                                  "value": {
                                        "user_note": "Estoy agregando una nota."
                                  }
                                }                      
                            }							
						}
					}
				},			
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Actualizar transacción"
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/user/{userID}/transactions/summary/": {
			"get": {
				"summary": "Gasto Total mensual",
				"operationId": "get_summary",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-05"
					}					
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener el gasto total mensual."
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/new-transaction/": {
            "post": {
                "summary": "Crear transaccion",
                "operationId": "crear_transaccion",
                "parameters": [
                ],
				"requestBody": {
                    "description": "Config object",
                    "required": true,
					"content": {
						"applications/json": {
							"schema": {
								"type": "string" 
							}
						}
					}
				},	
                "responses": {
					"201": {
                    	"description": "Created"
					}
                },
                "tags": [
                    "Transaction"
                ]
            } 
		},
		"/user/{userID}/transactions/expenses/summary/": {
			"get": {
				"summary": "Gasto Total de egresos",
				"operationId": "get_expenses_summary",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "query",
						"name": "date_month",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-05"
					}					
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener el gasto total de egresos."
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/user/{userID}/transactions/balance/": {
			"get": {
				"summary": "Balance Mensual",
				"operationId": "get_balance",
				"description": "",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "query",
						"name": "year",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Fecha",
						"example": "2022-05"
					}					
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener el gasto total de egresos."
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/user/{userID}/transactions/balance/category/{categoryID}": {
			"get": {
				"summary": "Balance Mensual por categoria",
				"operationId": "get_balance_category",
				"description": "Balance mensual por categoria",
				"parameters": [
					{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "categoryID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Id de categoria",
						"example": "22118f55-e6a9-46b0-ae8f-a063dda396e0"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener el gasto total de egresos por categoria"
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/tips/": {
			"get": {
				"summary": "Get all tips",
				"operationId": "get_tips",
				"description": "Get all tips",
				"parameters": [
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Lista de tips"
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/faqs/": {
			"get": {
				"summary": "Get all FAQ",
				"operationId": "get_faqs",
				"description": "Get all FAQS",
				"parameters": [
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Lista de FAQS"
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		},
		"/notifications/": {
			"get": {
				"summary": "Get all notifications",
				"operationId": "get_notifications",
				"description": "Get all notifications",
				"parameters": [
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Lista de notificaciones"
					}
				},
				"tags": [
					"Transacciones"
				]
			}
		}
	},
	"components": {
		"schemas": {
			"Presupuesto": {
				"title": "Presupuesto ",
				"type": "object",
				"properties": {
					"user": {
						"type": "string",
						"description": "Id del usuario"
					},
					"category": {
						"type": "string",
						"description": "Id de la categoria"
					},
					"amount": {
						"type": "number",
						"description": "Monto"
					},
					"budget_date": {
						"type": "string",
						"description": "Fecha"
					}
				},
				"required": [
					"user",
					"project",
					"amount",
					"category"
				]
			},
			"Transaccion": {
				"title": "Transacción ",
				"type": "object",
				"properties": {
					"account": {
						"type": "string",
						"description": "Cuenta del usuario"
					},
					"category": {
						"type": "string",
						"description": "Id de la categoria"
					},
					"amount": {
						"type": "number",
						"description": "Monto"
					},
					"description": {
						"type": "string",
						"description": "description"
					},
					"transaction_date": {
						"type": "string",
						"description": "Fecha"
					},
					"user_note": {
						"type": "string",
						"description": "Nota del usuario"
					}
				}
			}		
		}
	}
}
