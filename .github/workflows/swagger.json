{
	"openapi": "3.0.1",
	"info": {
		"title": "PFM",
		"version": "v1.0.0"
	},
	"servers": [{
		"url": "{URL}"
	}],
	"paths": {
		"/monitoring/health-check/": {
			"get": {
				"summary": "Health check",
				"operationId": "health_check",
				"description": "",
				"parameters": [],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite verificiar si el servicio está activo"
					}
				},
				"tags": [
					"Monitoreo"
				]
			}
		},
		"/monitoring/sentry/": {
			"get": {
				"summary": "Sentry",
				"operationId": "sentry",
				"description": "",
				"parameters": [],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite determinar si el servicio está conectado con Sentry."
					}
				},
				"tags": [
					"Monitoreo"
				]
			}
		},
		"/users/{userID}/projects/{projectID}/activities/": {
			"get": {
				"summary": "Listar actividades",
				"operationId": "get_activities",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "UUID del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "projectID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "UUID de la meta",
						"example": "016fe969-4d2f-43f9-81b4-1bdcebd975e4"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Permite obtener las actividades dado un usuario y meta."
					}
				},
				"tags": [
					"Actividades"
				]
			},
			"post": {
				"summary": "Crear actividad",
				"operationId": "post_activities",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "UUID del usuario",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "projectID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "UUID de la meta",
						"example": "016fe969-4d2f-43f9-81b4-1bdcebd975e4"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"title": "Actividad",
								"type": "object",
								"properties": {								
									"rule": {
										"type": "string",
										"description": "Id de la regla",
										"example": "6e10b138-9899-43cf-8a62-d6119456aa82"										
									},
									"payment": {
										"type": "string",
										"description": "Id del pago",
										"example": "edf6a8f3-3081-414e-9b2f-4b6fa32eba2e"
									},	
									"project_name": {
										"type": "string",
										"description": "Nombre de la meta",
										"example": "Meta de prueba"
									},
									"amount": {
										"type": "number",
										"description": "Cantidad",
										"example": 2000
									},
									"title": {
										"type": "string",
										"description": "Título",
										"example": "Titulo"
									},
									"message": {
										"type": "string",
										"description": "Mensaje",
										"example": "Mensaje"
									},
									"footer": {
										"type": "string",
										"description": "Footer",
										"example": "Footer"
									},
									"rule_name": {
										"type": "string",
										"description": "Nombre de la regla",
										"example": "Pasión Futbolera"
									},
									"rule_icon": {
										"type": "string",
										"description": "Iconp de la regla",
										"example": "./icon"
									},
									"activity_type": {
										"type": "string",
										"description": "Tipo de actividad",
										"enum": ["E", "S"]
									}
								},
								"required": [
									"user",
									"project",
									"rule",
									"payment"
								]
							}
						}
					}
				},
				"responses": {
					"201": {
						"description": "Created"
					}
				},
				"tags": [
					"Actividades"
				]
			}
		},
		"/users/{userID}/projects/{projectID}/activities/{activityID}/": {
			"get": {
				"summary": "Ver detalle de actividad",
				"operationId": "get_activity_detail",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "User ID",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "projectID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Project ID",
						"example": "016fe969-4d2f-43f9-81b4-1bdcebd975e4"
					},
					{
						"in": "path",
						"name": "activityID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Activity ID",
						"example": "afcc1b39-8887-4027-977d-5b1cbff2e533"
					}
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Get Activity detail"
					}
				},
				"tags": [
					"Actividades"
				]
			},
			"patch": {
				"summary": "Actualizar actividad parcialmente.",
				"operationId": "update_rule",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "User ID",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "projectID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Project ID",
						"example": "016fe969-4d2f-43f9-81b4-1bdcebd975e4"
					},
					{
						"in": "path",
						"name": "activityID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Activity ID",
						"example": "afcc1b39-8887-4027-977d-5b1cbff2e533"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"title": "Actividad",
								"type": "object",
								"properties": {
									"rule_name": {
										"type": "string",
										"description": "Nombre de la regla",
										"example": "Pasión Futbolera"
									}
								}
							}
						}
					}
				},				
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Update activity"
					}
				},
				"tags": [
					"Actividades"
				]
			},
			"put": {
				"summary": "Actualizar actividad.",
				"operationId": "update_rule_put",
				"description": "",
				"parameters": [{
						"in": "path",
						"name": "userID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "User ID",
						"example": "b9e605ee-4cca-400e-99c5-ae24abca97d5"
					},
					{
						"in": "path",
						"name": "projectID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Project ID",
						"example": "016fe969-4d2f-43f9-81b4-1bdcebd975e4"
					},
					{
						"in": "path",
						"name": "activityID",
						"schema": {
							"type": "string"
						},
						"required": true,
						"description": "Activity ID",
						"example": "afcc1b39-8887-4027-977d-5b1cbff2e533"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"title": "Actividad",
								"type": "object",
								"properties": {								
									"rule": {
										"type": "string",
										"description": "Id de la regla",
										"example": "6e10b138-9899-43cf-8a62-d6119456aa82"										
									},
									"payment": {
										"type": "string",
										"description": "Id del pago",
										"example": "edf6a8f3-3081-414e-9b2f-4b6fa32eba2e"
									},	
									"project_name": {
										"type": "string",
										"description": "Nombre de la meta",
										"example": "Meta de prueba"
									},
									"amount": {
										"type": "number",
										"description": "Cantidad",
										"example": 10000
									},
									"title": {
										"type": "string",
										"description": "Título",
										"example": "Titulo"
									},
									"message": {
										"type": "string",
										"description": "Mensaje",
										"example": "Mensaje"
									},
									"footer": {
										"type": "string",
										"description": "Footer",
										"example": "Footer"
									},
									"rule_name": {
										"type": "string",
										"description": "Nombre de la regla",
										"example": "Pasión Futbolera"
									},
									"rule_icon": {
										"type": "string",
										"description": "Iconp de la regla",
										"example": "./icon"
									},
									"activity_type": {
										"type": "string",
										"description": "Tipo de actividad. E -> Event, S -> Saving",
										"enum": ["E", "S"]
									}
								},
								"required": [
									"user",
									"project",
									"rule",
									"payment"
								]
							}
						}
					}
				},				
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {}
								}
							}
						},
						"description": "Update activity"
					}
				},
				"tags": [
					"Actividades"
				]
			}			
		}
	},
	"components": {
		"schemas": {
			"Activity": {
				"title": "Actividad",
				"type": "object",
				"properties": {
					"user": {
						"type": "string",
						"description": "User ID"
					},
					"project": {
						"type": "string",
						"description": "Project ID"
					},
					"rule": {
						"type": "string",
						"description": "Rule ID"
					},
					"project_name": {
						"type": "string",
						"description": "Project name"
					},
					"amount": {
						"type": "number",
						"description": "Activity amount"
					},
					"title": {
						"type": "string",
						"description": "Title"
					},
					"message": {
						"type": "string",
						"description": "Message"
					},
					"footer": {
						"type": "string",
						"description": "Footer"
					},
					"rule_name": {
						"type": "string",
						"description": "Rule name"
					},
					"rule_icon": {
						"type": "string",
						"description": "Rule icon"
					},
					"activity_type": {
						"type": "string",
						"description": "Tipo de actividad."
					}
				},
				"required": [
					"user",
					"project",
					"rule",
					"payment"
				]
			}
		}
	}
}
